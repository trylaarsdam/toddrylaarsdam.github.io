<!doctype html><html lang=en><head><title>ANL Gen3 Soil Sensors - Todd Rylaarsdam</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="C++, STM32 MCUs, Particle MCUs, PCB Design, KiCad, Onshape, Google Cloud, NodeJS, ExpressJS"><style>@import "https://fonts.googleapis.com/css2?family=Inconsolata&display=swap";:root{--cursor-visibility:hidden}html,body{height:97%;overflow:auto;font-family:inconsolata,monospace;font-size:4vmin;line-height:4.1vmin;font-weight:400;color:#fff}h1{line-height:6vmin}h2{line-height:5.5vmin}body{margin:0;display:flex;flex-direction:row;justify-content:center;align-items:center}#content{min-width:82vmin;min-height:82vmin;max-width:70vmax}::-webkit-scrollbar{width:10px}::-webkit-scrollbar-track{border-radius:10px;box-shadow:inset 0 0 1px white}::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:0 0 0 1px white}.cursor,#activity-title:after,#activity-content:after,#cd:after,#whoami:after,#cat:after,#tree:after{visibility:var(--cursor-visibility);content:"|";overflow:hidden;color:#fff;animation:blink 500ms linear infinite alternate}@keyframes blink{0%{opacity:0}100%{opacity:1}}@media only screen and (min-width:768px){body{font-size:2.5vmin;line-height:2.8vmin}#content{min-width:60vmin}}section{margin:auto;padding-top:10px}div#sectionleft{margin-right:15px;margin-bottom:10px;padding-left:15px}:root{--cursor-visibility:hidden}body{align-items:unset;overflow-y:scroll}#content{max-width:80vmin}pre{overflow-x:scroll;white-space:pre}@keyframes blink{0%{opacity:0}100%{opacity:1}}body{background:#1b1d1e}body #terminal{color:#bbb}body #user{color:#23e298}body #dir{color:#d08010}body .Typewriter__cursor{color:#bbb}a{color:#bbb}.navFull{background-color:#353535;font-family:courier new;font-size:17px;display:inline;position:fixed;bottom:0;left:0;width:100%;padding-top:5px;padding:10px;padding-bottom:0}.navCredits{float:right;padding-right:18px;padding-bottom:10px;padding-top:5px}#content::after{content:"\a\a";white-space:pre}</style></head><body><div id=content><span id=activity-title></span><br><span id=activity-content></span><br><script type=text/javascript>async function typewriter(e,t,n){var s=0,o=!1;addText="";const i=document.getElementById(t),a=()=>new Promise(e=>setTimeout(e,n)),r=()=>new Promise(e=>e()),c=()=>i.innerHTML=e.slice(0,s+1)+addText,l=document.createElement("span");for(l.id="blink",i.style.setProperty("--cursor-visibility","visible");s<e.length;){if(e.charAt(s+1)==="<"&&(o=!0),e.charAt(s+1)===">"&&(o=!1),o){s++;continue}requestAnimationFrame(c),n===0?await r():await a(),s++}i.style.setProperty("--cursor-visibility","collapse")}function parseDelay(e){const t=parseInt(e,10);return isNaN(t)?0:t}const titleDelay=parseDelay("0"),contentDelay=parseDelay("0"),typeeffetct=async()=>{await typewriter("<span id='terminal'><h1 id='title'>ANL Gen3 Soil Sensors</h1></span>","activity-title",titleDelay),await typewriter(`<span id='terminal'><p>Completed: 2022-03-01 | Client: Argonne National Laboratory | Employer: Windy City Lab</p>
<hr>
<section>
	<div id="sectionleft"><img style="max-height: 400px; float:left; max-width: 100%; padding-right: 10px; padding-bottom: 10px;" src='/assets/anl-gen3.png'></div>
</section>

<p>I worked on this project at <a href="https://thewcl.com">Windy City Lab</a> as a full time intern there. This project included a lot of different
components, from PCB design (including RF filtering and amplification) to 3d enclosure modeling to API work in Node.JS. The premise of the project
was that Argonne National Laboratory along with the University of Chicago wanted to have a fleet of 150 soil sensors (motes) buried underground for
4 years on battery, wirelessly transmitting the data they read from their various sensors to the cloud.</p>
<p>For the PCB design, I used KiCad to create schematics and PCB layouts for both our custom breakout board for the STM32WL (a microcontroller that we chose for being able to transmit on both LoRa and Sigfox), and the motherboard, which held 2 of those breakout boards (one for LoRa, one for Sigfox - due to limitations of the base firmware written by ST at the time, the microcontroller was only able to do one communication protocol at a time)). I worked with Field Application Engineers from ST to design these boards so that they would work correctly with the ST MCUs we were using (a huge thank you to Antonio and Alec for their instrumental help), and that the RF transmissions would have the lowest noise and highest power legally possible.</p>
<p>For the enclosure that contained the actual PCBs and batteries, I used KiCad to design a 3d printed device that allowed us to store 3 triple AA battery packs for a total of 9000mAh of battery capacity if required to meet the 4 year goal, and an easy to use snap-on mount for the motherboard. A screwless mount for the motherboard and batteries was crucial, since I would likely be the one assembling the devices, and 150 units * 4 screws * 5 seconds per screw adds up. For the external waterproof shell that housed the 3d printed portion, we used a 3in PVC pipe. It was readily available, and easily sealable with end caps and PVC glue.</p>
<!-- raw HTML omitted -->
</span>`,"activity-content",contentDelay)};typeeffetct()</script></div><span class=navFull><span><a href=/>Home</a>
<span>&#8192;|&#8192;</span>
<a href=./..>toddr.org/projects/</a></span>
<span class=navCredits>Â© 2023 Todd Rylaarsdam.
<a href=/legal>Legal</a></span></span></body></html>